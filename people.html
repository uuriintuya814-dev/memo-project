<!DOCTYPE html>
<html lang="mn">

<head>
    <meta charset="UTF-8">

    <title>–ë–∏ –•—ç–Ω –ë—ç?</title>
    <link rel="icon" href="images/img-0.png">
    <link rel="stylesheet" href="common.css">
    <link rel="stylesheet" href="people.css">
    <!-- jQuery & SweetAlert -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/2.1.2/sweetalert.min.js"></script>

</head>

<body>
    <!-- PROFILE BAR -->
    <div class="profile-bar">
        <div class="profile-pink">
            <div class="profile-img">
                <img src="images/pro.jpg" alt="">
            </div>
            <div class="text">
                <div style="font-weight: bold;">User Name </div>
                <div style="color: gray; font-size: 12px;">LV. MASTER KING</div>
                <div id="process"></div>
            </div>

        </div>
        <div class="point">
            YOUR POINT IS ... / 10000
        </div>
    </div>
    <a href="games.html" id="back"><button>–ë–£–¶–ê–•</button></a>

    <!--BUTTONS AND COIN-->
    <div class="header">

        <div class="currency-container">
            <div class="currency">
                <img src="images/coin.png" alt="Gold Coin">
                <span>4,892</span>
            </div>
            <div class="currency">
                <img src="images/diamond.png" alt="Blue Crystal">
                <span>8,219</span>
            </div>
        </div>

        <div class="btns">
            <a href="dashboard.html"><button>–ü—Ä–æ—Ñ–∞–π–ª</button></a>
            <a href="games.html"><button class="active">–¢–æ–≥–ª–æ–æ–º</button></a>
            <a href="info.html"><button>–ú—ç–¥—ç—ç–ª—ç–ª</button></a>
            <a href="about.html"><button>–ë–∏–¥–Ω–∏–π —Ç—É—Ö–∞–π</button></a>
        </div>
    </div>


    <!--SPIN WHEEL-->
    <div class="container">
        <h4 align="center" class="thought">–ê–ª–∏–π–≥ –Ω—å —Ç–æ–≥–ª–æ—Ö–æ–æ <br> –º—ç–¥—ç—Ö–≥“Ø–π –±–∞–π–Ω–∞ —É—É?</h4>
        <div class="row">
            <div class="col-xs-12" align="center">
                <div id="wheel">
                    <canvas id="canvas" width="260" height="260"></canvas>
                </div>
            </div>
        </div>
        <div class="row" style="margin-top: 20px;">
            <div class="col-xs-12" align="center">
                <button onclick="startSpin()" class="btn">–≠—Ä–≥“Ø“Ø–ª—ç—Ö</button>
            </div>
        </div>
    </div>

    <!-- SPIN RESPONSE -->
    <div id="resultModal">
        <div class="modal-content">
            <div class="modal-header">
            </div>
            <div class="modal-body" id="modalBodyText">
                <!-- “Æ—Ä –¥“Ø–Ω —ç–Ω–¥ –≥–∞—Ä–Ω–∞ -->
            </div>
            <div class="modal-footer">
                <button onclick="hideModal()" class="btn">–¢–æ–≥–ª–æ—Ö</button>
                <button onclick="hideModal()" class="btn">–ì–∞—Ä–∞—Ö</button>
            </div>
        </div>
    </div>


    <div class="game-container">
        <div class="avatar">
            <div class="avatar-pic"><img src="images/avatar (3).png" alt=""></div>
            <div class="avatar-text">
                <div class="title">–¶–∞—Ä–∞–π –±–æ–ª–æ–Ω –Ω—ç—Ä —Ü—ç—ç–∂–ª—ç—Ö —Ç–æ–≥–ª–æ–æ–º —Ç–æ–≥–ª–æ—Ü–≥–æ–æ—ë</div>
            </div>

        </div>
        <div class="game">

            <div id="image-box">
                <img id="person-img" src="people/start.png" alt="" />
            </div>
            <div id="name-label"></div>
            <div id="stage-info"></div>
            <div id="choices"></div>
            <div id="score"></div>
            <div id="message"></div>
            <button id="start-btn">–¢–æ–≥–ª–æ–æ–º —ç—Ö–ª—ç—Ö</button>
            <button id="next-stage-btn">–î–∞—Ä–∞–∞–≥–∏–π–Ω —à–∞—Ç —ç—Ö–ª—ç—Ö</button>
            <div id="final-score"></div>
        </div>
    </div>



    <script>
        const names = [
            "“Æ–ª—ç–º–∂", "–ê–ª—Ç–∞–Ω—Ç”©–≥—Å", "–¢—ç–Ω“Ø“Ø–Ω", "–£—á—Ä–∞–ª", "–ú”©–Ω—Ö-–Ω–∞—Å–∞–Ω", "–¶—ç—Ä—ç–Ω", "–°–∞—Ä—É—É–ª", "–ò–≤—ç—ç–ª", "–•–æ–Ω–≥–æ—Ä", "–≠–Ω–≥“Ø“Ø–Ω",
            "–ì—ç—Ä—ç–ª—Ç", "–ê–Ω–∞—Ä", "–ú”©—Ä”©–Ω", "”®–Ω”©—Ä", "–ù–∞–º—É—É–Ω", "–•–∏—à–∏–≥—ç—ç", "–°—ç—Ü—ç–Ω", "–¢—ç–º“Ø“Ø–ª—ç–Ω", "–¢—ç—Ä–≥—ç–ª", "–ù–æ–º–∏–Ω",
            "–≠–Ω—Ö—ç—ç", "–¢–æ–≥—Ç—É—É–Ω", "–ú”©–Ω—Ö–∂–∏–Ω", "–ë–æ–ª–æ—Ä", "“Æ–π–ª—Å—Ç", "–¶—ç–ª–º—ç–≥", "–î”©–ª–≥”©”©–Ω", "–•–∞–ª–∏—É–Ω", "–ò—Ä—ç—ç–¥“Ø–π", "–ê–Ω–∏—Ä"
        ];

        const images = [
            "people/1.jpg", "people/2.jpg", "people/3.jpg", "people/4.jpg", "people/5.jpg",
            "people/6.jpg", "people/7.jpg", "people/8.jpg", "people/9.jpg", "people/10.jpg",
            "people/11.jpg", "people/12.jpg", "people/13.jpg", "people/14.jpg", "people/15.jpg",
            "people/16.jpg", "people/17.jpg", "people/18.jpg", "people/19.jpg", "people/20.jpg",
            "people/21.jpg", "people/22.jpg", "people/23.jpg", "people/24.jpg", "people/25.jpg",
            "people/26.jpg", "people/27.jpg", "people/28.jpg", "people/29.jpg", "people/30.jpg"
        ];

        const people = Array.from({ length: 30 }, (_, i) => ({
            name: names[i],
            image: images[i]
        }));



        const stages = [5, 10, 15];
        let currentStage = 0;
        let stageScore = 0;
        let totalScore = 0;
        let memoryList = [];
        let quizList = [];
        let currentQuizIndex = 0;

        const img = document.getElementById("person-img");
        const nameLabel = document.getElementById("name-label");
        const choices = document.getElementById("choices");
        const stageInfo = document.getElementById("stage-info");
        const score = document.getElementById("score");
        const startBtn = document.getElementById("start-btn");
        const nextStageBtn = document.getElementById("next-stage-btn");
        const finalScore = document.getElementById("final-score");
        const message = document.getElementById("message");

        startBtn.onclick = startGame;
        nextStageBtn.onclick = () => {
            currentStage++;
            message.textContent = "";
            nextStageBtn.style.display = "none";
            if (currentStage < stages.length) {
                startStage();
            } else {
                showFinalScore();
            }
        };

        function startGame() {
            currentStage = 0;
            totalScore = 0;
            startBtn.style.display = "none";
            finalScore.textContent = "";
            message.textContent = "";
            startStage();
        }

        function startStage() {
            stageScore = 0;
            currentQuizIndex = 0;
            memoryList = shuffle([...people]).slice(0, stages[currentStage]);
            quizList = [...memoryList];
            showMemory(0);
        }

        function showMemory(i) {
            if (i >= memoryList.length) {
                setTimeout(() => showQuiz(0), 1000);
                return;
            }
            const person = memoryList[i];
            img.src = person.image;
            nameLabel.textContent = person.name;
            choices.classList.remove("quiz-mode");
            choices.innerHTML = "";
            score.textContent = `üß† –°–∞–Ω–∞—Ö —Ö—ç—Å—ç–≥ (${i + 1}/${memoryList.length})`;
            stageInfo.textContent = `${currentStage + 1}-—Ä —à–∞—Ç`;
            setTimeout(() => showMemory(i + 1), 1500);
        }

        function showQuiz(i) {
            if (i >= quizList.length) {
                score.textContent = `–û–Ω–æ–æ: ${stageScore}/${quizList.length}`;
                stageInfo.textContent = `${currentStage + 1}-—Ä —à–∞—Ç –¥—É—É—Å–ª–∞–∞!`;
                message.textContent = "";
                totalScore += stageScore;
                nextStageBtn.style.display = "inline-block";
                return;
            }

            const person = quizList[i];
            img.src = person.image;
            nameLabel.textContent = "";
            stageInfo.textContent = `üßê –•—ç–Ω –±—ç‚ùì (${i + 1}/${quizList.length})`;
            score.textContent = `–û–Ω–æ–æ: ${stageScore}`;

            const options = [person.name];
            while (options.length < 4) {
                const rand = people[Math.floor(Math.random() * people.length)].name;
                if (!options.includes(rand)) options.push(rand);
            }

            shuffle(options);
            choices.classList.add("quiz-mode");
            choices.innerHTML = "";
            options.forEach(name => {
                const btn = document.createElement("button");
                btn.className = "choice-btn";
                btn.textContent = name;
                btn.onclick = () => checkAnswer(name, person.name, btn);
                choices.appendChild(btn);
            });
        }


        function checkAnswer(selected, correct, btn) {
            const buttons = document.querySelectorAll(".choice-btn");
            buttons.forEach(b => b.disabled = true);
            if (selected === correct) {
                btn.classList.add("correct");
                stageScore++;
            } else {
                btn.classList.add("wrong");
                buttons.forEach(b => {
                    if (b.textContent === correct) b.classList.add("correct");
                });
            }
            setTimeout(() => showQuiz(currentQuizIndex + 1), 1000);
            currentQuizIndex++;
        }

        function showFinalScore() {
            img.src = "";
            nameLabel.textContent = "";
            choices.innerHTML = "";
            stageInfo.textContent = "";
            score.textContent = "";
            finalScore.textContent = `üéâ –¢–æ–≥–ª–æ–æ–º –¥—É—É—Å–ª–∞–∞! –ù–∏–π—Ç –æ–Ω–æ–æ: ${totalScore} / ${stages.reduce((a, b) => a + b, 0)}`;

            if (totalScore >= 25) {
                message.textContent = "üëè –ì–∞–π—Ö–∞–ª—Ç–∞–π –æ–π —Å–∞–Ω–∞–º–∂—Ç–∞–π –±–∞–π–Ω–∞!";
            } else if (totalScore >= 15) {
                message.textContent = "üëç –°–∞–π–Ω –±–∞–π–Ω–∞! –î–∞—Ö–∏–Ω —Ç—É—Ä—à–∞–∞–¥ “Ø–∑!";
            } else {
                message.textContent = "üí™ –£—Ä–∞–º —Ö—É–≥–∞—Ä–∞—Ö —Ö—ç—Ä—ç–≥–≥“Ø–π, –¥–∞—Ö–∏–Ω –æ—Ä–æ–ª–¥–æ–æ—Ä–æ–π!";
            }

            startBtn.textContent = "üîÅ –î–∞—Ö–∏–Ω —ç—Ö–ª—ç—Ö";
            startBtn.style.display = "inline-block";
        }

        function shuffle(arr) {
            for (let i = arr.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [arr[i], arr[j]] = [arr[j], arr[i]];
            }
            return arr;
        }
    </script>
    <script src="common.js"></script>
    <script src="userData.js"></script>
</body>

</html>