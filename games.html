<!DOCTYPE html>
<html lang="mn">

<head>
    <meta charset="UTF-8">

    <title>Memo Dashboard</title>
    <link rel="stylesheet" href="dashboard.css">
    <link rel="stylesheet" href="games.css">
    <!-- jQuery & SweetAlert -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/2.1.2/sweetalert.min.js"></script>

</head>

<body>
    <!-- PROFILE BAR -->
    <div class="profile-bar">
        <div class="profile-pink">
            <div class="profile-img">
                <img src="images/pro.jpg" alt="">
            </div>
            <div class="text">
                <div style="font-weight: bold;">User Name </div>
                <div style="color: gray; font-size: 12px;">LV. MASTER KING</div>
                <div id="process"></div>
            </div>

        </div>
        <div class="point">
            YOUR POINT IS ... / 10000
        </div>
    </div>



    <div class="header">

        <div class="currency-container">
            <div class="currency">
                <img src="images/coin.png" alt="Gold Coin">
                <span>4,892</span>
            </div>
            <div class="currency">
                <img src="images/diamond.png" alt="Blue Crystal">
                <span>8,219</span>
            </div>
        </div>

        <div class="btns">
            <a href="dashboard.html"><button>–ü—Ä–æ—Ñ–∞–π–ª</button></a>
            <a href="games.html"><button class="active">–¢–æ–≥–ª–æ–æ–º</button></a>
            <a href="info.html"><button>–ú—ç–¥—ç—ç–ª—ç–ª</button></a>
            <a href="about.html"><button>–ë–∏–¥–Ω–∏–π —Ç—É—Ö–∞–π</button></a>
        </div>
    </div>



    <div class="container">
        <h4 align="center" class="thought">–ê–ª–∏–π–≥ –Ω—å —Ç–æ–≥–ª–æ—Ö–æ–æ <br> –º—ç–¥—ç—Ö–≥“Ø–π –±–∞–π–Ω–∞ —É—É?</h4>
        <div class="row">
            <div class="col-xs-12" align="center">
                <div id="wheel">
                    <canvas id="canvas" width="260" height="260"></canvas>
                </div>
            </div>
        </div>
        <div class="row" style="margin-top: 20px;">
            <div class="col-xs-12" align="center">
                <button onclick="startSpin()" class="btn">–≠—Ä–≥“Ø“Ø–ª—ç—Ö</button>
            </div>
        </div>
    </div>

    <!-- Modal -->
    <div id="resultModal">
        <div class="modal-content">
            <div class="modal-header">
            </div>
            <div class="modal-body" id="modalBodyText">
                <!-- “Æ—Ä –¥“Ø–Ω —ç–Ω–¥ –≥–∞—Ä–Ω–∞ -->
            </div>
            <div class="modal-footer">
                <button onclick="hideModal()" class="btn">–¢–æ–≥–ª–æ—Ö</button>
                <button onclick="hideModal()" class="btn">–ì–∞—Ä–∞—Ö</button>
            </div>
        </div>
    </div>

    <div class="game-container">
        <div class="game-cocontainer">
            <div class="game-card">
                <div class="game-img"><img src="images/reaction.png" alt=""></div>
                <div class="game-name">–ê–Ω—Ö–∞–∞—Ä & –¢”©–≤–ª”©—Ä</div>
                <a href="reaction.html"><button class="playbtn">PLAY</button></a>
            </div>
            <div class="game-card">
                <div class="game-img"><img src="images/sonstogtoo.png" alt=""></div>
                <div class="game-name">–°–æ–Ω—Å & –¢–æ–≥—Ç–æ–æ</div>
                <a href="color.html"><button class="playbtn">PLAY</button></a>
            </div>
            <div class="game-card">
                <div class="game-img"><img src="images/reaction.png" alt=""></div>
                <div class="game-name">–ú–µ–º–æ –ö–∞—Ä—Ç</div>
                <a href="memory-card.html"><button class="playbtn">PLAY</button></a>
            </div>
            <div class="game-card">
                <div class="game-img"><img src="images/reaction.png" alt=""></div>
                <div class="game-name">–ê–Ω—Ö–∞–∞—Ä & –¢”©–≤–ª”©—Ä</div>
                <a href="reaction.html"><button class="playbtn">PLAY</button></a>
            </div>
            <div class="game-card">
                <div class="game-img"><img src="images/reaction.png" alt=""></div>
                <div class="game-name">–ê–Ω—Ö–∞–∞—Ä & –¢”©–≤–ª”©—Ä</div>
                <a href="reaction.html"><button class="playbtn">PLAY</button></a>
            </div>
            <div class="game-card">
                <div class="game-img"><img src="images/reaction.png" alt=""></div>
                <div class="game-name">–ê–Ω—Ö–∞–∞—Ä & –¢”©–≤–ª”©—Ä</div>
                <a href="reaction.html"><button class="playbtn">PLAY</button></a>
            </div>
            <div class="game-card">
                <div class="game-img"><img src="images/reaction.png" alt=""></div>
                <div class="game-name">–ê–Ω—Ö–∞–∞—Ä & –¢”©–≤–ª”©—Ä</div>
                <a href="reaction.html"><button class="playbtn">PLAY</button></a>
            </div>
            <div class="game-card">
                <div class="game-img"><img src="images/reaction.png" alt=""></div>
                <div class="game-name">–ê–Ω—Ö–∞–∞—Ä & –¢”©–≤–ª”©—Ä</div>
                <a href="reaction.html"><button class="playbtn">PLAY</button></a>
            </div>
            
        </div>


    </div>



    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        const width = canvas.width;
        const center = width / 2;

        const color_data = ['#fedf30', '#fdb441', '#fd6930', '#eb5454', '#bf9dd3', '#29b8cd', "#00f2a6", "#f67"];
        const label_data = ['Divyesh', 'Roshni', 'Rency', 'Reem', 'Ditya', 'Feny', 'Greny', 'Ronil'];
        const slices = color_data.length;
        const sliceDeg = 360 / slices;

        let deg = Math.random() * 360;
        let speed = 10;
        let animation;
        let isSpinning = false;
        let lock = false;
        let slowDownRand = 0;

        function deg2rad(deg) {
            return deg * Math.PI / 180;
        }

        function rand(min, max) {
            return Math.random() * (max - min) + min;
        }

        function drawWheel(currentDeg) {
            ctx.clearRect(0, 0, width, width);
            let tempDeg = currentDeg;

            for (let i = 0; i < slices; i++) {
                ctx.beginPath();
                ctx.fillStyle = color_data[i];
                ctx.moveTo(center, center);
                ctx.arc(center, center, center, deg2rad(tempDeg), deg2rad(tempDeg + sliceDeg));
                ctx.lineTo(center, center);
                ctx.fill();

                const drawText_deg = tempDeg + sliceDeg / 2;
                ctx.save();
                ctx.translate(center, center);
                ctx.rotate(deg2rad(drawText_deg));
                ctx.textAlign = "right";
                ctx.fillStyle = "#fff";
                ctx.font = 'bold 15px sans-serif';
                ctx.fillText(label_data[i], 100, 5);
                ctx.restore();

                tempDeg += sliceDeg;
            }
        }

        function spin() {
            deg += speed;
            deg %= 360;

            if (!lock && isSpinning) {
                animation = requestAnimationFrame(spin);
                drawWheel(deg);
                return;
            }

            // Decelerate
            if (lock) {
                if (speed > 0.2) {
                    speed *= slowDownRand;
                } else {
                    cancelAnimationFrame(animation);
                    isSpinning = false;
                    speed = 10;
                    lock = false;
                    showResult();
                    return;
                }
                deg += speed;
                deg %= 360;
                animation = requestAnimationFrame(spin);
                drawWheel(deg);
            }
        }

        function startSpin() {
            isSpinning = true;
            lock = false;
            slowDownRand = rand(0.985, 0.992);
            speed = 10;
            deg = Math.random() * 360;
            drawWheel(deg);
            spin();

            // Stop after 3 seconds
            setTimeout(() => {
                lock = true;
            }, 3000);
        }

        function showResult() {
            const ai = Math.floor(((360 - deg - 90) % 360) / sliceDeg);
            const index = (slices + ai) % slices;
            const winner = label_data[index];

            document.getElementById("modalBodyText").innerHTML = `<p class="text-center">It's <strong>${winner}</strong>'s turn! üéØ</p>`;
            $('#resultModal').modal('show');
        }

        // Draw initial wheel
        drawWheel(deg);
        function showResult() {
            const ai = Math.floor(((360 - deg - 90) % 360) / sliceDeg);
            const index = (slices + ai) % slices;
            const winner = label_data[index];

            document.getElementById("modalBodyText").innerHTML = `
    <p class="text-center" style="color: purple;">–≠–Ω—ç —É–¥–∞–∞ <strong>${winner}</strong> —Ç–æ–≥–ª–æ–æ—Ä–æ–π! üéØ</p>`;
            document.getElementById('resultModal').style.display = 'flex';
        }

        function hideModal() {
            document.getElementById('resultModal').style.display = 'none';
        }
    </script>


    <script src="userData.js"></script>
</body>

</html>